{"version":3,"file":"main.js","mappings":"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","sources":["webpack://edhelper/./src/js/main.js","webpack://edhelper/./src/js/idd.js","webpack://edhelper/./src/js/debounce.js"],"sourcesContent":["// import './bootstrapJS/bootstrap.js';\nimport { ddInput } from './idd.js';\n\nfunction columnFilter(inputSelector, tableId) {\n    const input = $(inputSelector);\n\n    input.on(\n        'input',\n        { tableId: tableId },\n        function (e) {\n            const colIdx = $(this).attr('data-filter-idx');\n            const text = $(this).val().trim().toLowerCase();\n\n            for (let i = 0; i < $(e.data.tableId + ' tbody tr').length; i++) {\n                const $row = $(e.data.tableId + ' tbody tr').eq(i);\n\n                if ($row.find('td').eq(colIdx).text().trim().toLowerCase().includes(text)) {\n                    $row.show();\n                } else $row.hide();\n            }\n        }\n    )\n}\n\nif ($('#dataTable').eq(0).length) columnFilter('input.search', '#dataTable');\nif ($('[data-idd]').eq(0).length) ddInput();\nif ($('[data-ac]').eq(0).length) autoComplete();\n\nconst tooltipTriggerList = document.querySelectorAll('[data-bs-toggle=\"tooltip\"]');\n\nif (tooltipTriggerList) {\n    const tooltipList = [...tooltipTriggerList].map(\n        tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl)\n    );\n}\n\n// form filter button behavior\n$('.form-filter.collapse').on('show.bs.collapse', function () {\n    const id = $(this).attr('id');\n    $(`button[data-bs-target='#${id}']`).text('close');\n})\n$('.form-filter.collapse').on('hide.bs.collapse', function () {\n    const id = $(this).attr('id');\n    $(`button[data-bs-target='#${id}']`).text('filter');\n})\n// end of form filter button behavior\n\n// custom jQuery Autocomplete widget\n$.widget(\"custom.bsAutocomplete\", $.ui.autocomplete, {\n    _renderMenu: function (ul, items) {\n        const that = this;\n        $.each(items, function (index, item) {\n            that._renderItemData(ul, item);\n        });\n        $(ul).addClass(\"dropdown-menu overflow-y-auto overflow-x-hidden\");\n        $(ul).find('li').addClass('dd-list-item');\n    }\n});\n// end of custom jQuery Autocomplete widget\n\n$(\"#materialtraderssearch-refsystem\").bsAutocomplete({\n    source: \"/search/?cat=system\",\n    minLength: 3,\n    delay: 1000,\n    focus: function (event, ui) {\n        this.value = ui.item.label; // or $('#autocomplete-input').val(ui.item.label);\n        event.preventDefault(); // Prevent the default focus behavior.\n    },\n    select: function (event, ui) {\n        this.value = ui.item.label;\n        $(\"#materialtraderssearch-refsystemid\").val(ui.item.value);\n        event.preventDefault();\n    },\n    search: function (event, ui) { \n        $('.spinner').removeClass('visually-hidden');\n    },\n    response: function (event, ui) {\n        $('.spinner').addClass('visually-hidden');\n    }\n});\n","import { debounce } from './debounce.js';\n\nexport function ddInput() {;\n    $('[data-idd-url]').on('input', function () {\n        if ($(this).hasClass('is-invalid')) $(this).removeClass('is-invalid');\n    })\n\n    $('[data-idd-url]').on('input', debounce(function (e) {\n        if (this.value.length < 3) return;\n        // $(this).closest('[data-idd]').find('[idd-selected]').addClass('visually-hidden')\n        $(this).closest('[data-idd]').find('[idd-loading]').removeClass('visually-hidden');\n        $(this)\n            .closest('[data-idd]')\n            .find('.dropdown-menu')\n            .load($(this).data().iddUrl + encodeURIComponent(this.value) + ' li', handleLoad);\n    }, 1000));\n\n    function handleLoad(response, status, xhr) {\n        if (status === \"error\") {\n            $(this).closest('[data-idd]').find('[idd-error]').removeClass('visually-hidden');\n        } else if (status === \"success\") {\n            $(this).closest('[data-idd]').find('[idd-error]').addClass('visually-hidden');\n        }\n\n        $(this).closest('[data-idd]').find('.dropdown-toggle').trigger('click');\n        $(this).on('click', '.dd-list-item', function () {\n            $(this).closest('[data-idd]').find('[data-idd-url]').val($(this).text());\n            // $(this).closest('[data-idd]').find(' [idd-selected]').removeClass('visually-hidden');\n            // $(this).closest('[data-idd]').find('[idd-selected] > [idd-selected-value]').text($text);\n        })\n        \n        // $(this).closest('[data-idd]').find('[idd-selected]').removeClass('visually-hidden')\n        $(this).closest('[data-idd]').find('[idd-loading]').addClass('visually-hidden');\n    }\n}","export function debounce(fn, ms) {\r\n    let timeout;\r\n    return function () {\r\n        const fnCall = () => { fn.apply(this, arguments) }\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(fnCall, ms)\r\n    };\r\n};"],"names":["$","eq","length","on","tableId","e","colIdx","this","attr","text","val","trim","toLowerCase","i","data","$row","find","includes","show","hide","handleLoad","response","status","xhr","closest","removeClass","addClass","trigger","hasClass","fn","timeout","clearTimeout","setTimeout","fnCall","apply","arguments","debounce","value","load","iddUrl","encodeURIComponent","ddInput","autoComplete","tooltipTriggerList","document","querySelectorAll","map","tooltipTriggerEl","bootstrap","Tooltip","id","concat","widget","ui","autocomplete","_renderMenu","ul","items","that","each","index","item","_renderItemData","bsAutocomplete","source","minLength","delay","focus","event","label","preventDefault","select","search"],"sourceRoot":""}